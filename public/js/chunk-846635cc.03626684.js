(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-846635cc"],{5118:function(e,t,n){(function(e){var a="undefined"!==typeof e&&e||"undefined"!==typeof self&&self||window,i=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new o(i.call(setTimeout,a,arguments),clearTimeout)},t.setInterval=function(){return new o(i.call(setInterval,a,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(a,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n("6017"),t.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n("c8ba"))},6017:function(e,t,n){(function(e,t){(function(e,n){"use strict";if(!e.setImmediate){var a,i=1,o={},s=!1,c=e.document,r=Object.getPrototypeOf&&Object.getPrototypeOf(e);r=r&&r.setTimeout?r:e,"[object process]"==={}.toString.call(e.process)?m():f()?h():e.MessageChannel?v():c&&"onreadystatechange"in c.createElement("script")?_():y(),r.setImmediate=u,r.clearImmediate=l}function u(e){"function"!==typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var s={callback:e,args:t};return o[i]=s,a(i),i++}function l(e){delete o[e]}function d(e){var t=e.callback,a=e.args;switch(a.length){case 0:t();break;case 1:t(a[0]);break;case 2:t(a[0],a[1]);break;case 3:t(a[0],a[1],a[2]);break;default:t.apply(n,a);break}}function p(e){if(s)setTimeout(p,0,e);else{var t=o[e];if(t){s=!0;try{d(t)}finally{l(e),s=!1}}}}function m(){a=function(e){t.nextTick(function(){p(e)})}}function f(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}function h(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"===typeof n.data&&0===n.data.indexOf(t)&&p(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),a=function(n){e.postMessage(t+n,"*")}}function v(){var e=new MessageChannel;e.port1.onmessage=function(e){var t=e.data;p(t)},a=function(t){e.port2.postMessage(t)}}function _(){var e=c.documentElement;a=function(t){var n=c.createElement("script");n.onreadystatechange=function(){p(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}function y(){a=function(e){setTimeout(p,0,e)}}})("undefined"===typeof self?"undefined"===typeof e?this:e:self)}).call(this,n("c8ba"),n("f28c"))},"7e40":function(e,t,n){},f440:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"scan"},[n("van-notice-bar",{attrs:{scrollable:!0,speed:80}},[e._v("请长按二维码保存至手机后，打开微信“扫一扫”，点击右上角“相册”选择刚保存的二维码进行支付")]),n("h2",{staticStyle:{"line-height":"20px"}},[e._v("扫一扫付款")]),n("h5",{staticStyle:{"line-height":"0",margin:"10px"}},[e._v("HPay收银台 收款方：Halower")]),n("div",{staticClass:"friend-tip"},[e._v("付款后稍等片刻，系统自动反馈付款结果")]),n("van-row",{staticStyle:{"line-height":"30px"}},[n("van-col",{attrs:{span:"16"}},[e._v("支付票据号:    "+e._s(e.id_code))]),n("van-col",{attrs:{span:"8"}},[n("van-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.id_code,expression:"id_code",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopy,expression:"onCopy",arg:"success"}],class:[e.overtime?"overtime":""],attrs:{icon:"https://img.yzcdn.cn/vant/logo.png",size:"small",plain:"",disabled:e.overtime,type:"primary"}},[e._v("复制")])],1)],1),n("div",{staticClass:"pay_qr_code"},[n("img",{class:[e.overtime?"overtime":""],attrs:{src:e.paymentCode,alt:""}})]),n("div",{staticClass:"pay_qr_code_desc"},[n("img",{class:[e.overtime?"overtime":""],attrs:{src:e.qrDescSrc,alt:""}})]),n("van-count-down",{attrs:{time:e.time},on:{finish:e.overtimeNotify},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n      请于\n      "),n("span",{staticClass:"item",class:[e.overtime?"overtime":""]},[e._v(e._s(t.minutes))]),e._v(" 分\n      "),n("span",{staticClass:"item",class:[e.overtime?"overtime":""]},[e._v(e._s(t.seconds))]),e._v(" 秒\n      内支付\n    ")]}}])}),n("div",{staticClass:"status-bar"},[n("van-button",{attrs:{loading:!e.overtime,disabled:!e.finished,size:"large",type:e.overtime?"danger":"primary","loading-type":"spinner","loading-text":e.loadingTip}},[e._v(e._s(e.loadingTip))])],1)],1)},i=[],o=(n("7f7f"),n("f564")),s=n("5118"),c=n("bc3a"),r=n.n(c),u={name:"Scanning",mounted:function(){this.id_code=this.$route.params.id_code;var e=new EventSource("http://xhl.liuchangxi.com/api/pay/stream/".concat(this.$route.params.id)),t=this;e.onmessage=function(e){"FINISHED"==e.data&&"scan"==t.$route.name&&(t.finished=!0,Object(s["setTimeout"])(function(){t.$router.push({name:"success"})},1500))}},computed:{loadingTip:function(){return this.overtime?"已过期":this.overtime||this.finished?!this.overtime&&this.finished?"交易完成":"未知状态":"等待中..."},paymentCode:function(){switch(this.$route.params.pay_type){case"微信":return"".concat(this.root_path,"/wx_pay/wx_").concat(this.$route.params.amount,".jpg");case"支付宝":return"".concat(this.root_path,"/ali_pay/ali_").concat(this.$route.params.amount,".jpg");default:return"".concat(this.root_path,"/wx_pay/wx_").concat(this.$route.params.amount,".jpg")}},qrDescSrc:function(){switch(this.$route.params.pay_type){case"微信":return"".concat(this.root_path,"/wechat-explain.png");case"支付宝":return"".concat(this.root_path,"/alipay-explain.png");default:return"".concat(this.root_path,"/wechat-explain.png")}}},data:function(){return{root_path:"/pay",id_code:"",finished:!1,overtime:!1,time:3e5}},methods:{overtimeNotify:function(){this.overtime=!0,r.a.post("http://xhl.liuchangxi.com/api/pay/status",{id:this.$route.params.id,trading_status:"OVERTIME"})},onCopy:function(){Object(o["a"])({type:"primary",message:"复制成功,为了更精确的完成支付流程,请在支付时在备注中输入您的票据号"})}}},l=u,d=(n("fca6"),n("2877")),p=Object(d["a"])(l,a,i,!1,null,"59fe34c8",null);t["default"]=p.exports},fca6:function(e,t,n){"use strict";var a=n("7e40"),i=n.n(a);i.a}}]);
//# sourceMappingURL=chunk-846635cc.03626684.js.map